---
description: Port Allocation Registry
globs: 
alwaysApply: false
---
<rule>
name: port_allocation
summary: Central registry of static/long-running port numbers across all Vibe subsystems.
description: |
  Prevents port clashes and makes onboarding easier. All scripts and docs must reference this table (or related ENV vars) instead of hard-coding values. When adding a new server, pick an unused port ≥ 4000 (if possible), update this file, and cross-link any docs.
  
  Reserved ports:
  | Port | Purpose | Subsystem / Script | Notes |
  |------|---------|--------------------|-------|
  | 5500 | Five-Server dev server (frontend) | `bun run serve`, Playwright tests | Default baseURL `http://localhost:5500` |
  | 3001 | (unused) Former Ticket-API | n/a | Reserved; do not use unless reintroduced |
  | 4333 | Primary MCP server (Desktop-Commander plugin) | `start:mcp` (see docs) | Central AI tooling hub |
  | 5555 | Alternate MCP server (ad-hoc/demo) | Manual examples | Keep free unless explicitly running a second daemon |
  | 9229 | Node/Bun inspector | Debugging | Attach with `--inspect=9229` |
  | 3306 | MySQL (future) | Database | Reserved for potential DB service |

  Guidelines:
  – Before spinning up a new listener, consult this table.
  – Prefer ports ≥ 4000 for experimental tools to avoid well-known conflicts.
  – Update this file and related scripts (.env, docs) when claiming a port.
  – The `predev` script may kill any port listed here to guarantee clean startup.
  – CI pipelines and Playwright probes assume these defaults; change with caution.

filters:
  - type: event
    pattern: "tool_call"
actions:
  - type: inform
    message: |
      Port allocation updated. If a build script detects a port in use that isn't listed here, flag it.
</rule>

