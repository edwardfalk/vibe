ID: RULE-20250812-05
Title: Fix Tone.js audio routing, diagnostics, and ID usage
Context: Current audio MVP has several correctness issues: Players are created with toDestination() (bypassing buses), the Meter node is wired backwards (no signal), CDN remap uses a <commit> placeholder, manifest path points to /public/audio/* (served as /audio/*), speech bed synth bypasses buses, and many calls use raw string IDs instead of SOUND constants. These cause inconsistent volume control, silent diagnostics, occasional 404s, and typo-prone SFX calls.
Policy:
  - Players routing:
    - SampleLoader MUST NOT call toDestination(). Return an unconnected Tone.Players.
    - ToneAudioFacade MUST connect all non-music samples to the SFX bus and music* IDs to the MUSIC bus.
  - Meter wiring:
    - Tap the master by connecting master -> meter (master.connect(meter)), not meter.connect(master).
  - Speech pad routing:
    - Route SpeechCoordinator pad to the speechBed bus (not toDestination()).
  - SOUND constants:
    - Use SOUND.* constants for all playSound calls; forbid raw string IDs in packages/**.
  - Manifest & CDN remap:
    - Fetch manifest from "/audio/manifest.json" at runtime (not "/public/audio/â€¦").
    - Pin the Tone.js CDN remap to a real commit hash (no "<commit>").
Enforcement: 
  - Extend validate-sounds and add lint/scan to forbid toDestination() in SampleLoader and raw string SFX IDs.
  - Manual reviews block merges until these are satisfied.
Scope: packages/core/src/audio/**, packages/** SFX callers
Rationale: Ensures buses actually work, diagnostics are accurate, network paths are valid, and SFX calls are typo-safe.
Links: [mdc:packages/core/src/audio/ToneAudioFacade.js], [mdc:packages/core/src/audio/SampleLoader.js], [mdc:packages/core/src/audio/SpeechCoordinator.js], [mdc:packages/core/src/audio/SoundIds.js]
Status: Active
Added: 2025-08-12