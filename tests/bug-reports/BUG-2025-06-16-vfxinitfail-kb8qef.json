{
  "id": "BUG-2025-06-16-vfxinitfail-kb8qef",
  "type": "bug",
  "title": "Visual Effects initialization fails every frame due to missing mathUtils import in visualEffects.js",
  "status": "in-progress",
  "tags": ["focus", "ai", "graphics", "visual", "performance"],
  "createdAt": "2025-06-16T00:00:00Z",
  "description": "The VisualEffectsManager logs \u201c⚠️ Visual effects initialization failed: {}\u201d every frame, resulting in loss of background visual effects and massive log spam. Root cause is an invalid import in packages/fx/src/visualEffects.js that points to the nonexistent @vibe/core alias. This causes random(), sin(), cos() to be undefined and the init routines throw TypeError, swallowed by a broad catch block.",
  "stepsToReproduce": [
    "Start the game via bun run dev.",
    "Observe the console logs—notice hundreds of repeated \u2018Visual effects initialization failed\u2019 lines.",
    "Gameplay shows no nebula/aurora/dust background effects."],
  "expected": "VisualEffectsManager initializes once, backgrounds render, no error spam.",
  "actual": "Initialization fails each draw call; backgrounds missing; log flooded.",
  "artifacts": [
    "logs/.debug/2025-06-15.log (excerpt lines 1-250)"
  ],
  "rootCause": "Invalid import statement: import { sin, cos, randomRange as random } from '@vibe/core'; where '@vibe/core' alias is undefined.",
  "proposedFix": [
    "Replace import with: import { random, sin, cos } from '../../core/src/mathUtils.js';",
    "Replace remaining naked math calls with imported helpers.",
    "Remove or improve catch block to log full error stack."],
  "history": [
    {
      "timestamp": "2025-06-16T00:00:00Z",
      "author": "Debug-Doctor AI",
      "action": "created",
      "comment": "Initial ticket created with analysis and proposed fix."
    }
  ]
} 